"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/units/page",{

/***/ "(app-pages-browser)/./app/services/units.ts":
/*!*******************************!*\
  !*** ./app/services/units.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUnit: () => (/* binding */ createUnit),\n/* harmony export */   deleteUnit: () => (/* binding */ deleteUnit),\n/* harmony export */   getUnit: () => (/* binding */ getUnit),\n/* harmony export */   getUnits: () => (/* binding */ getUnits),\n/* harmony export */   updateUnit: () => (/* binding */ updateUnit)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(app-pages-browser)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var _qrcode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./qrcode */ \"(app-pages-browser)/./app/services/qrcode.ts\");\n\n\nconst supabaseUrl = \"https://pslapwodbwhedywmlfmk.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBzbGFwd29kYndoZWR5d21sZm1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1NTQ4NzgsImV4cCI6MjA1NjEzMDg3OH0.YXR7RN1ELBO8ywDv_tXpioTFJrpNXr9UtDLhxzgcHmU\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseAnonKey);\nasync function getUnits(buildingId) {\n    try {\n        let query = supabase.from('units').select('*').order('unit_number');\n        if (buildingId) {\n            query = query.eq('building_id', buildingId);\n        }\n        const { data, error } = await query;\n        if (error) {\n            console.error('Supabase error:', error);\n            throw new Error(\"Failed to fetch units: \".concat(error.message));\n        }\n        if (!data) {\n            throw new Error('No data returned from Supabase');\n        }\n        return data;\n    } catch (error) {\n        console.error('Error in getUnits:', error);\n        throw error;\n    }\n}\nasync function getUnit(id) {\n    try {\n        console.log(\"Fetching unit with ID: \".concat(id));\n        // Use direct fetch API with proper headers and limit parameter\n        const response = await fetch(\"\".concat(supabaseUrl, \"/rest/v1/units?id=eq.\").concat(encodeURIComponent(id), \"&limit=1\"), {\n            method: 'GET',\n            headers: {\n                'apikey': supabaseAnonKey,\n                'Authorization': \"Bearer \".concat(supabaseAnonKey),\n                // Explicitly set Accept header to avoid 406 errors\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Prefer': 'return=representation'\n            }\n        });\n        // Log the full response for debugging\n        console.log(\"Unit fetch response status: \".concat(response.status, \" \").concat(response.statusText));\n        if (!response.ok) {\n            console.error(\"Error fetching unit: \".concat(response.status, \" \").concat(response.statusText));\n            // If we get a 406 error, try an alternative approach\n            if (response.status === 406) {\n                console.log('Attempting alternative fetch method for unit due to 406 error');\n                return await fetchUnitAlternative(id);\n            }\n            throw new Error(\"Failed to fetch unit: \".concat(response.status, \" \").concat(response.statusText));\n        }\n        const units = await response.json();\n        console.log(\"Received data for unit query:\", units);\n        if (!units || units.length === 0) {\n            console.error(\"Unit not found with ID: \".concat(id));\n            throw new Error(\"Unit not found with ID: \".concat(id));\n        }\n        return units[0];\n    } catch (error) {\n        console.error(\"Failed to fetch unit (\".concat(id, \"):\"), error);\n        throw error;\n    }\n}\n// Alternative fetch method if the main one fails with 406\nasync function fetchUnitAlternative(id) {\n    try {\n        console.log(\"Using alternative fetch method for unit with ID: \".concat(id));\n        // Try a simpler fetch with minimal headers\n        const response = await fetch(\"\".concat(supabaseUrl, \"/rest/v1/units?id=eq.\").concat(encodeURIComponent(id), \"&limit=1\"), {\n            method: 'GET',\n            headers: {\n                'apikey': supabaseAnonKey,\n                'Authorization': \"Bearer \".concat(supabaseAnonKey)\n            }\n        });\n        if (!response.ok) {\n            throw new Error(\"Alternative fetch failed: \".concat(response.status, \" \").concat(response.statusText));\n        }\n        const units = await response.json();\n        if (!units || units.length === 0) {\n            throw new Error(\"Unit not found with ID: \".concat(id, \" (alternative method)\"));\n        }\n        return units[0];\n    } catch (error) {\n        console.error(\"Failed with alternative fetch for unit (\".concat(id, \"):\"), error);\n        throw error;\n    }\n}\nasync function createUnit(unit) {\n    try {\n        console.log('[Unit Debug] Creating new unit:', unit);\n        // First create the unit without QR code\n        const { data, error } = await supabase.from('units').insert([\n            unit\n        ]).select().single();\n        if (error) {\n            console.error('[Unit Debug] Supabase error creating unit:', error);\n            throw error;\n        }\n        console.log('[Unit Debug] Unit created successfully:', data);\n        // Now generate and assign QR code\n        try {\n            console.log('[Unit Debug] Starting QR code generation for unit:', data.id);\n            const qrCodeUrl = await (0,_qrcode__WEBPACK_IMPORTED_MODULE_0__.generateAndUploadQRCode)(data.id, data.unit_number, data.building_id);\n            console.log('[Unit Debug] QR code generated, URL:', qrCodeUrl);\n            // Update the unit with the QR code URL\n            console.log('[Unit Debug] Updating unit with QR code URL');\n            const { data: updatedData, error: updateError } = await supabase.from('units').update({\n                qr_code_url: qrCodeUrl\n            }).eq('id', data.id).select().single();\n            if (updateError) {\n                console.error('[Unit Debug] Error updating unit with QR code:', updateError);\n                // Still return the unit even if QR code assignment fails\n                return data;\n            }\n            console.log('[Unit Debug] Unit updated with QR code URL successfully:', updatedData);\n            return updatedData;\n        } catch (qrError) {\n            console.error('[Unit Debug] Error generating QR code:', qrError);\n            // Return the unit without QR code if generation fails\n            return data;\n        }\n    } catch (error) {\n        console.error('[Unit Debug] Error in createUnit:', error);\n        throw error;\n    }\n}\nasync function updateUnit(unit) {\n    try {\n        const { data, error } = await supabase.from('units').update(unit).eq('id', unit.id).select().single();\n        if (error) {\n            console.error('Supabase error:', error);\n            throw error;\n        }\n        return data;\n    } catch (error) {\n        console.error('Error in updateUnit:', error);\n        throw error;\n    }\n}\nasync function deleteUnit(id) {\n    try {\n        const { error } = await supabase.from('units').delete().eq('id', id);\n        if (error) {\n            console.error('Supabase error:', error);\n            throw error;\n        }\n    } catch (error) {\n        console.error('Error in deleteUnit:', error);\n        throw error;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9zZXJ2aWNlcy91bml0cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBRUY7QUFFbkQsTUFBTUUsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLFdBQVdSLG1FQUFZQSxDQUFDRSxhQUFhSTtBQUVwQyxlQUFlRyxTQUFTQyxVQUFtQjtJQUNoRCxJQUFJO1FBQ0YsSUFBSUMsUUFBUUgsU0FDVEksSUFBSSxDQUFDLFNBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxLQUFLLENBQUM7UUFFVCxJQUFJSixZQUFZO1lBQ2RDLFFBQVFBLE1BQU1JLEVBQUUsQ0FBQyxlQUFlTDtRQUNsQztRQUVBLE1BQU0sRUFBRU0sSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTjtRQUU5QixJQUFJTSxPQUFPO1lBQ1RDLFFBQVFELEtBQUssQ0FBQyxtQkFBbUJBO1lBQ2pDLE1BQU0sSUFBSUUsTUFBTSwwQkFBd0MsT0FBZEYsTUFBTUcsT0FBTztRQUN6RDtRQUVBLElBQUksQ0FBQ0osTUFBTTtZQUNULE1BQU0sSUFBSUcsTUFBTTtRQUNsQjtRQUVBLE9BQU9IO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxzQkFBc0JBO1FBQ3BDLE1BQU1BO0lBQ1I7QUFDRjtBQUVPLGVBQWVJLFFBQVFDLEVBQVU7SUFDdEMsSUFBSTtRQUNGSixRQUFRSyxHQUFHLENBQUMsMEJBQTZCLE9BQUhEO1FBRXRDLCtEQUErRDtRQUMvRCxNQUFNRSxXQUFXLE1BQU1DLE1BQU0sR0FBc0NDLE9BQW5DeEIsYUFBWSx5QkFBOEMsT0FBdkJ3QixtQkFBbUJKLEtBQUksYUFBVztZQUNuR0ssUUFBUTtZQUNSQyxTQUFTO2dCQUNQLFVBQVV0QjtnQkFDVixpQkFBaUIsVUFBMEIsT0FBaEJBO2dCQUMzQixtREFBbUQ7Z0JBQ25ELFVBQVU7Z0JBQ1YsZ0JBQWdCO2dCQUNoQixVQUFVO1lBQ1o7UUFDRjtRQUVBLHNDQUFzQztRQUN0Q1ksUUFBUUssR0FBRyxDQUFDLCtCQUFrREMsT0FBbkJBLFNBQVNLLE1BQU0sRUFBQyxLQUF1QixPQUFwQkwsU0FBU00sVUFBVTtRQUVqRixJQUFJLENBQUNOLFNBQVNPLEVBQUUsRUFBRTtZQUNoQmIsUUFBUUQsS0FBSyxDQUFDLHdCQUEyQ08sT0FBbkJBLFNBQVNLLE1BQU0sRUFBQyxLQUF1QixPQUFwQkwsU0FBU00sVUFBVTtZQUU1RSxxREFBcUQ7WUFDckQsSUFBSU4sU0FBU0ssTUFBTSxLQUFLLEtBQUs7Z0JBQzNCWCxRQUFRSyxHQUFHLENBQUM7Z0JBQ1osT0FBTyxNQUFNUyxxQkFBcUJWO1lBQ3BDO1lBRUEsTUFBTSxJQUFJSCxNQUFNLHlCQUE0Q0ssT0FBbkJBLFNBQVNLLE1BQU0sRUFBQyxLQUF1QixPQUFwQkwsU0FBU00sVUFBVTtRQUNqRjtRQUVBLE1BQU1HLFFBQVEsTUFBTVQsU0FBU1UsSUFBSTtRQUNqQ2hCLFFBQVFLLEdBQUcsQ0FBRSxpQ0FBZ0NVO1FBRTdDLElBQUksQ0FBQ0EsU0FBU0EsTUFBTUUsTUFBTSxLQUFLLEdBQUc7WUFDaENqQixRQUFRRCxLQUFLLENBQUMsMkJBQThCLE9BQUhLO1lBQ3pDLE1BQU0sSUFBSUgsTUFBTSwyQkFBOEIsT0FBSEc7UUFDN0M7UUFFQSxPQUFPVyxLQUFLLENBQUMsRUFBRTtJQUNqQixFQUFFLE9BQU9oQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBNEIsT0FBSEssSUFBRyxPQUFLTDtRQUMvQyxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSwwREFBMEQ7QUFDMUQsZUFBZWUscUJBQXFCVixFQUFVO0lBQzVDLElBQUk7UUFDRkosUUFBUUssR0FBRyxDQUFDLG9EQUF1RCxPQUFIRDtRQUVoRSwyQ0FBMkM7UUFDM0MsTUFBTUUsV0FBVyxNQUFNQyxNQUFNLEdBQXNDQyxPQUFuQ3hCLGFBQVkseUJBQThDLE9BQXZCd0IsbUJBQW1CSixLQUFJLGFBQVc7WUFDbkdLLFFBQVE7WUFDUkMsU0FBUztnQkFDUCxVQUFVdEI7Z0JBQ1YsaUJBQWlCLFVBQTBCLE9BQWhCQTtZQUM3QjtRQUNGO1FBRUEsSUFBSSxDQUFDa0IsU0FBU08sRUFBRSxFQUFFO1lBQ2hCLE1BQU0sSUFBSVosTUFBTSw2QkFBZ0RLLE9BQW5CQSxTQUFTSyxNQUFNLEVBQUMsS0FBdUIsT0FBcEJMLFNBQVNNLFVBQVU7UUFDckY7UUFFQSxNQUFNRyxRQUFRLE1BQU1ULFNBQVNVLElBQUk7UUFFakMsSUFBSSxDQUFDRCxTQUFTQSxNQUFNRSxNQUFNLEtBQUssR0FBRztZQUNoQyxNQUFNLElBQUloQixNQUFNLDJCQUE4QixPQUFIRyxJQUFHO1FBQ2hEO1FBRUEsT0FBT1csS0FBSyxDQUFDLEVBQUU7SUFDakIsRUFBRSxPQUFPaEIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMkNBQThDLE9BQUhLLElBQUcsT0FBS0w7UUFDakUsTUFBTUE7SUFDUjtBQUNGO0FBRU8sZUFBZW1CLFdBQVdDLElBQXFCO0lBQ3BELElBQUk7UUFDRm5CLFFBQVFLLEdBQUcsQ0FBQyxtQ0FBbUNjO1FBQy9DLHdDQUF3QztRQUN4QyxNQUFNLEVBQUVyQixJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ULFNBQzNCSSxJQUFJLENBQUMsU0FDTDBCLE1BQU0sQ0FBQztZQUFDRDtTQUFLLEVBQ2J4QixNQUFNLEdBQ04wQixNQUFNO1FBRVQsSUFBSXRCLE9BQU87WUFDVEMsUUFBUUQsS0FBSyxDQUFDLDhDQUE4Q0E7WUFDNUQsTUFBTUE7UUFDUjtRQUVBQyxRQUFRSyxHQUFHLENBQUMsMkNBQTJDUDtRQUV2RCxrQ0FBa0M7UUFDbEMsSUFBSTtZQUNGRSxRQUFRSyxHQUFHLENBQUMsc0RBQXNEUCxLQUFLTSxFQUFFO1lBQ3pFLE1BQU1rQixZQUFZLE1BQU12QyxnRUFBdUJBLENBQzdDZSxLQUFLTSxFQUFFLEVBQ1BOLEtBQUt5QixXQUFXLEVBQ2hCekIsS0FBSzBCLFdBQVc7WUFHbEJ4QixRQUFRSyxHQUFHLENBQUMsd0NBQXdDaUI7WUFFcEQsdUNBQXVDO1lBQ3ZDdEIsUUFBUUssR0FBRyxDQUFDO1lBQ1osTUFBTSxFQUFFUCxNQUFNMkIsV0FBVyxFQUFFMUIsT0FBTzJCLFdBQVcsRUFBRSxHQUFHLE1BQU1wQyxTQUNyREksSUFBSSxDQUFDLFNBQ0xpQyxNQUFNLENBQUM7Z0JBQUVDLGFBQWFOO1lBQVUsR0FDaEN6QixFQUFFLENBQUMsTUFBTUMsS0FBS00sRUFBRSxFQUNoQlQsTUFBTSxHQUNOMEIsTUFBTTtZQUVULElBQUlLLGFBQWE7Z0JBQ2YxQixRQUFRRCxLQUFLLENBQUMsa0RBQWtEMkI7Z0JBQ2hFLHlEQUF5RDtnQkFDekQsT0FBTzVCO1lBQ1Q7WUFFQUUsUUFBUUssR0FBRyxDQUFDLDREQUE0RG9CO1lBQ3hFLE9BQU9BO1FBQ1QsRUFBRSxPQUFPSSxTQUFTO1lBQ2hCN0IsUUFBUUQsS0FBSyxDQUFDLDBDQUEwQzhCO1lBQ3hELHNEQUFzRDtZQUN0RCxPQUFPL0I7UUFDVDtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMscUNBQXFDQTtRQUNuRCxNQUFNQTtJQUNSO0FBQ0Y7QUFFTyxlQUFlK0IsV0FBV1gsSUFBcUI7SUFDcEQsSUFBSTtRQUNGLE1BQU0sRUFBRXJCLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTVQsU0FDM0JJLElBQUksQ0FBQyxTQUNMaUMsTUFBTSxDQUFDUixNQUNQdEIsRUFBRSxDQUFDLE1BQU1zQixLQUFLZixFQUFFLEVBQ2hCVCxNQUFNLEdBQ04wQixNQUFNO1FBRVQsSUFBSXRCLE9BQU87WUFDVEMsUUFBUUQsS0FBSyxDQUFDLG1CQUFtQkE7WUFDakMsTUFBTUE7UUFDUjtRQUVBLE9BQU9EO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLE1BQU1BO0lBQ1I7QUFDRjtBQUVPLGVBQWVnQyxXQUFXM0IsRUFBVTtJQUN6QyxJQUFJO1FBQ0YsTUFBTSxFQUFFTCxLQUFLLEVBQUUsR0FBRyxNQUFNVCxTQUNyQkksSUFBSSxDQUFDLFNBQ0xzQyxNQUFNLEdBQ05uQyxFQUFFLENBQUMsTUFBTU87UUFFWixJQUFJTCxPQUFPO1lBQ1RDLFFBQVFELEtBQUssQ0FBQyxtQkFBbUJBO1lBQ2pDLE1BQU1BO1FBQ1I7SUFDRixFQUFFLE9BQU9BLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvam9lbGt3b2gvRG9jdW1lbnRzL0dpdEh1Yi9teXFyY29kZS1odWIvYXBwL3NlcnZpY2VzL3VuaXRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyBVbml0LCBDcmVhdGVVbml0SW5wdXQsIFVwZGF0ZVVuaXRJbnB1dCB9IGZyb20gJy4uL3R5cGVzL3VuaXRzJztcbmltcG9ydCB7IGdlbmVyYXRlQW5kVXBsb2FkUVJDb2RlIH0gZnJvbSAnLi9xcmNvZGUnO1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCE7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSE7XG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVuaXRzKGJ1aWxkaW5nSWQ/OiBzdHJpbmcpOiBQcm9taXNlPFVuaXRbXT4ge1xuICB0cnkge1xuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndW5pdHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAub3JkZXIoJ3VuaXRfbnVtYmVyJyk7XG4gICAgXG4gICAgaWYgKGJ1aWxkaW5nSWQpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2J1aWxkaW5nX2lkJywgYnVpbGRpbmdJZCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCB1bml0czogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIGlmICghZGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkYXRhIHJldHVybmVkIGZyb20gU3VwYWJhc2UnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRVbml0czonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVuaXQoaWQ6IHN0cmluZyk6IFByb21pc2U8VW5pdD4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGBGZXRjaGluZyB1bml0IHdpdGggSUQ6ICR7aWR9YCk7XG4gICAgXG4gICAgLy8gVXNlIGRpcmVjdCBmZXRjaCBBUEkgd2l0aCBwcm9wZXIgaGVhZGVycyBhbmQgbGltaXQgcGFyYW1ldGVyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtzdXBhYmFzZVVybH0vcmVzdC92MS91bml0cz9pZD1lcS4ke2VuY29kZVVSSUNvbXBvbmVudChpZCl9JmxpbWl0PTFgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXBpa2V5Jzogc3VwYWJhc2VBbm9uS2V5LFxuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzdXBhYmFzZUFub25LZXl9YCxcbiAgICAgICAgLy8gRXhwbGljaXRseSBzZXQgQWNjZXB0IGhlYWRlciB0byBhdm9pZCA0MDYgZXJyb3JzXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdQcmVmZXInOiAncmV0dXJuPXJlcHJlc2VudGF0aW9uJ1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIExvZyB0aGUgZnVsbCByZXNwb25zZSBmb3IgZGVidWdnaW5nXG4gICAgY29uc29sZS5sb2coYFVuaXQgZmV0Y2ggcmVzcG9uc2Ugc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIHVuaXQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICBcbiAgICAgIC8vIElmIHdlIGdldCBhIDQwNiBlcnJvciwgdHJ5IGFuIGFsdGVybmF0aXZlIGFwcHJvYWNoXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDYpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgYWx0ZXJuYXRpdmUgZmV0Y2ggbWV0aG9kIGZvciB1bml0IGR1ZSB0byA0MDYgZXJyb3InKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZldGNoVW5pdEFsdGVybmF0aXZlKGlkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggdW5pdDogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdW5pdHMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc29sZS5sb2coYFJlY2VpdmVkIGRhdGEgZm9yIHVuaXQgcXVlcnk6YCwgdW5pdHMpO1xuICAgIFxuICAgIGlmICghdW5pdHMgfHwgdW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbml0IG5vdCBmb3VuZCB3aXRoIElEOiAke2lkfWApO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbml0IG5vdCBmb3VuZCB3aXRoIElEOiAke2lkfWApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdW5pdHNbMF07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZldGNoIHVuaXQgKCR7aWR9KTpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gQWx0ZXJuYXRpdmUgZmV0Y2ggbWV0aG9kIGlmIHRoZSBtYWluIG9uZSBmYWlscyB3aXRoIDQwNlxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hVbml0QWx0ZXJuYXRpdmUoaWQ6IHN0cmluZyk6IFByb21pc2U8VW5pdD4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGBVc2luZyBhbHRlcm5hdGl2ZSBmZXRjaCBtZXRob2QgZm9yIHVuaXQgd2l0aCBJRDogJHtpZH1gKTtcbiAgICBcbiAgICAvLyBUcnkgYSBzaW1wbGVyIGZldGNoIHdpdGggbWluaW1hbCBoZWFkZXJzXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtzdXBhYmFzZVVybH0vcmVzdC92MS91bml0cz9pZD1lcS4ke2VuY29kZVVSSUNvbXBvbmVudChpZCl9JmxpbWl0PTFgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYXBpa2V5Jzogc3VwYWJhc2VBbm9uS2V5LFxuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzdXBhYmFzZUFub25LZXl9YFxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQWx0ZXJuYXRpdmUgZmV0Y2ggZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB1bml0cyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBcbiAgICBpZiAoIXVuaXRzIHx8IHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbml0IG5vdCBmb3VuZCB3aXRoIElEOiAke2lkfSAoYWx0ZXJuYXRpdmUgbWV0aG9kKWApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdW5pdHNbMF07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHdpdGggYWx0ZXJuYXRpdmUgZmV0Y2ggZm9yIHVuaXQgKCR7aWR9KTpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVuaXQodW5pdDogQ3JlYXRlVW5pdElucHV0KTogUHJvbWlzZTxVbml0PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1tVbml0IERlYnVnXSBDcmVhdGluZyBuZXcgdW5pdDonLCB1bml0KTtcbiAgICAvLyBGaXJzdCBjcmVhdGUgdGhlIHVuaXQgd2l0aG91dCBRUiBjb2RlXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1bml0cycpXG4gICAgICAuaW5zZXJ0KFt1bml0XSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbVW5pdCBEZWJ1Z10gU3VwYWJhc2UgZXJyb3IgY3JlYXRpbmcgdW5pdDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnW1VuaXQgRGVidWddIFVuaXQgY3JlYXRlZCBzdWNjZXNzZnVsbHk6JywgZGF0YSk7XG5cbiAgICAvLyBOb3cgZ2VuZXJhdGUgYW5kIGFzc2lnbiBRUiBjb2RlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdbVW5pdCBEZWJ1Z10gU3RhcnRpbmcgUVIgY29kZSBnZW5lcmF0aW9uIGZvciB1bml0OicsIGRhdGEuaWQpO1xuICAgICAgY29uc3QgcXJDb2RlVXJsID0gYXdhaXQgZ2VuZXJhdGVBbmRVcGxvYWRRUkNvZGUoXG4gICAgICAgIGRhdGEuaWQsXG4gICAgICAgIGRhdGEudW5pdF9udW1iZXIsXG4gICAgICAgIGRhdGEuYnVpbGRpbmdfaWRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdbVW5pdCBEZWJ1Z10gUVIgY29kZSBnZW5lcmF0ZWQsIFVSTDonLCBxckNvZGVVcmwpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHVuaXQgd2l0aCB0aGUgUVIgY29kZSBVUkxcbiAgICAgIGNvbnNvbGUubG9nKCdbVW5pdCBEZWJ1Z10gVXBkYXRpbmcgdW5pdCB3aXRoIFFSIGNvZGUgVVJMJyk7XG4gICAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWREYXRhLCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd1bml0cycpXG4gICAgICAgIC51cGRhdGUoeyBxcl9jb2RlX3VybDogcXJDb2RlVXJsIH0pXG4gICAgICAgIC5lcSgnaWQnLCBkYXRhLmlkKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW1VuaXQgRGVidWddIEVycm9yIHVwZGF0aW5nIHVuaXQgd2l0aCBRUiBjb2RlOicsIHVwZGF0ZUVycm9yKTtcbiAgICAgICAgLy8gU3RpbGwgcmV0dXJuIHRoZSB1bml0IGV2ZW4gaWYgUVIgY29kZSBhc3NpZ25tZW50IGZhaWxzXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnW1VuaXQgRGVidWddIFVuaXQgdXBkYXRlZCB3aXRoIFFSIGNvZGUgVVJMIHN1Y2Nlc3NmdWxseTonLCB1cGRhdGVkRGF0YSk7XG4gICAgICByZXR1cm4gdXBkYXRlZERhdGE7XG4gICAgfSBjYXRjaCAocXJFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW1VuaXQgRGVidWddIEVycm9yIGdlbmVyYXRpbmcgUVIgY29kZTonLCBxckVycm9yKTtcbiAgICAgIC8vIFJldHVybiB0aGUgdW5pdCB3aXRob3V0IFFSIGNvZGUgaWYgZ2VuZXJhdGlvbiBmYWlsc1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tVbml0IERlYnVnXSBFcnJvciBpbiBjcmVhdGVVbml0OicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVW5pdCh1bml0OiBVcGRhdGVVbml0SW5wdXQpOiBQcm9taXNlPFVuaXQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VuaXRzJylcbiAgICAgIC51cGRhdGUodW5pdClcbiAgICAgIC5lcSgnaWQnLCB1bml0LmlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHVwZGF0ZVVuaXQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVVbml0KGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VuaXRzJylcbiAgICAgIC5kZWxldGUoKVxuICAgICAgLmVxKCdpZCcsIGlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGRlbGV0ZVVuaXQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59ICJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJnZW5lcmF0ZUFuZFVwbG9hZFFSQ29kZSIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2UiLCJnZXRVbml0cyIsImJ1aWxkaW5nSWQiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImVxIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsIkVycm9yIiwibWVzc2FnZSIsImdldFVuaXQiLCJpZCIsImxvZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJtZXRob2QiLCJoZWFkZXJzIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm9rIiwiZmV0Y2hVbml0QWx0ZXJuYXRpdmUiLCJ1bml0cyIsImpzb24iLCJsZW5ndGgiLCJjcmVhdGVVbml0IiwidW5pdCIsImluc2VydCIsInNpbmdsZSIsInFyQ29kZVVybCIsInVuaXRfbnVtYmVyIiwiYnVpbGRpbmdfaWQiLCJ1cGRhdGVkRGF0YSIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwicXJfY29kZV91cmwiLCJxckVycm9yIiwidXBkYXRlVW5pdCIsImRlbGV0ZVVuaXQiLCJkZWxldGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/services/units.ts\n"));

/***/ })

});