"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/units/page",{

/***/ "(app-pages-browser)/./app/services/units.ts":
/*!*******************************!*\
  !*** ./app/services/units.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUnit: () => (/* binding */ createUnit),\n/* harmony export */   deleteUnit: () => (/* binding */ deleteUnit),\n/* harmony export */   getUnit: () => (/* binding */ getUnit),\n/* harmony export */   getUnits: () => (/* binding */ getUnits),\n/* harmony export */   updateUnit: () => (/* binding */ updateUnit)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(app-pages-browser)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var _qrcode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./qrcode */ \"(app-pages-browser)/./app/services/qrcode.ts\");\n\n\nconst supabaseUrl = \"https://pslapwodbwhedywmlfmk.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBzbGFwd29kYndoZWR5d21sZm1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1NTQ4NzgsImV4cCI6MjA1NjEzMDg3OH0.YXR7RN1ELBO8ywDv_tXpioTFJrpNXr9UtDLhxzgcHmU\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseAnonKey);\nasync function getUnits(buildingId) {\n    try {\n        let query = supabase.from('units').select('*').order('unit_number');\n        if (buildingId) {\n            query = query.eq('building_id', buildingId);\n        }\n        const { data, error } = await query;\n        if (error) {\n            console.error('Supabase error:', error);\n            throw new Error(\"Failed to fetch units: \".concat(error.message));\n        }\n        if (!data) {\n            throw new Error('No data returned from Supabase');\n        }\n        return data;\n    } catch (error) {\n        console.error('Error in getUnits:', error);\n        throw error;\n    }\n}\nasync function getUnit(id) {\n    try {\n        // Add explicit headers for better cross-device compatibility\n        const { data, error } = await supabase.from('units').select('*').eq('id', id).single({\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        });\n        if (error) {\n            console.error('Error fetching unit:', error);\n            throw error;\n        }\n        if (!data) {\n            console.error('No unit found with ID:', id);\n            throw new Error(\"Unit not found: \".concat(id));\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Failed to fetch unit (\".concat(id, \"):\"), error);\n        // Try a second approach if the first one fails (for mobile compatibility)\n        try {\n            console.log('Attempting alternative fetch approach for mobile compatibility');\n            const response = await fetch(\"\".concat(supabaseUrl, \"/rest/v1/units?id=eq.\").concat(id, \"&select=*\"), {\n                method: 'GET',\n                headers: {\n                    'apikey': supabaseAnonKey,\n                    'Authorization': \"Bearer \".concat(supabaseAnonKey),\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            });\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            const units = await response.json();\n            if (units && units.length > 0) {\n                return units[0];\n            } else {\n                throw new Error(\"Unit not found: \".concat(id));\n            }\n        } catch (fallbackError) {\n            console.error('Alternative fetch also failed:', fallbackError);\n            throw error; // Throw the original error\n        }\n    }\n}\nasync function createUnit(unit) {\n    try {\n        console.log('[Unit Debug] Creating new unit:', unit);\n        // First create the unit without QR code\n        const { data, error } = await supabase.from('units').insert([\n            unit\n        ]).select().single();\n        if (error) {\n            console.error('[Unit Debug] Supabase error creating unit:', error);\n            throw error;\n        }\n        console.log('[Unit Debug] Unit created successfully:', data);\n        // Now generate and assign QR code\n        try {\n            console.log('[Unit Debug] Starting QR code generation for unit:', data.id);\n            const qrCodeUrl = await (0,_qrcode__WEBPACK_IMPORTED_MODULE_0__.generateAndUploadQRCode)(data.id, data.unit_number, data.building_id);\n            console.log('[Unit Debug] QR code generated, URL:', qrCodeUrl);\n            // Update the unit with the QR code URL\n            console.log('[Unit Debug] Updating unit with QR code URL');\n            const { data: updatedData, error: updateError } = await supabase.from('units').update({\n                qr_code_url: qrCodeUrl\n            }).eq('id', data.id).select().single();\n            if (updateError) {\n                console.error('[Unit Debug] Error updating unit with QR code:', updateError);\n                // Still return the unit even if QR code assignment fails\n                return data;\n            }\n            console.log('[Unit Debug] Unit updated with QR code URL successfully:', updatedData);\n            return updatedData;\n        } catch (qrError) {\n            console.error('[Unit Debug] Error generating QR code:', qrError);\n            // Return the unit without QR code if generation fails\n            return data;\n        }\n    } catch (error) {\n        console.error('[Unit Debug] Error in createUnit:', error);\n        throw error;\n    }\n}\nasync function updateUnit(unit) {\n    try {\n        const { data, error } = await supabase.from('units').update(unit).eq('id', unit.id).select().single();\n        if (error) {\n            console.error('Supabase error:', error);\n            throw error;\n        }\n        return data;\n    } catch (error) {\n        console.error('Error in updateUnit:', error);\n        throw error;\n    }\n}\nasync function deleteUnit(id) {\n    try {\n        const { error } = await supabase.from('units').delete().eq('id', id);\n        if (error) {\n            console.error('Supabase error:', error);\n            throw error;\n        }\n    } catch (error) {\n        console.error('Error in deleteUnit:', error);\n        throw error;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9zZXJ2aWNlcy91bml0cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBRUY7QUFFbkQsTUFBTUUsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLFdBQVdSLG1FQUFZQSxDQUFDRSxhQUFhSTtBQUVwQyxlQUFlRyxTQUFTQyxVQUFtQjtJQUNoRCxJQUFJO1FBQ0YsSUFBSUMsUUFBUUgsU0FDVEksSUFBSSxDQUFDLFNBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxLQUFLLENBQUM7UUFFVCxJQUFJSixZQUFZO1lBQ2RDLFFBQVFBLE1BQU1JLEVBQUUsQ0FBQyxlQUFlTDtRQUNsQztRQUVBLE1BQU0sRUFBRU0sSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTjtRQUU5QixJQUFJTSxPQUFPO1lBQ1RDLFFBQVFELEtBQUssQ0FBQyxtQkFBbUJBO1lBQ2pDLE1BQU0sSUFBSUUsTUFBTSwwQkFBd0MsT0FBZEYsTUFBTUcsT0FBTztRQUN6RDtRQUVBLElBQUksQ0FBQ0osTUFBTTtZQUNULE1BQU0sSUFBSUcsTUFBTTtRQUNsQjtRQUVBLE9BQU9IO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxzQkFBc0JBO1FBQ3BDLE1BQU1BO0lBQ1I7QUFDRjtBQUVPLGVBQWVJLFFBQVFDLEVBQVU7SUFDdEMsSUFBSTtRQUNGLDZEQUE2RDtRQUM3RCxNQUFNLEVBQUVOLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTVQsU0FDM0JJLElBQUksQ0FBQyxTQUNMQyxNQUFNLENBQUMsS0FDUEUsRUFBRSxDQUFDLE1BQU1PLElBQ1RDLE1BQU0sQ0FBQztZQUNOQyxTQUFTO2dCQUNQLFVBQVU7Z0JBQ1YsZ0JBQWdCO1lBQ2xCO1FBQ0Y7UUFFRixJQUFJUCxPQUFPO1lBQ1RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1lBQ3RDLE1BQU1BO1FBQ1I7UUFF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QU0sQ0FBQ1AsTUFDUHJCLEVBQUUsQ0FBQyxNQUFNcUIsS0FBS2QsRUFBRSxFQUNoQlQsTUFBTSxHQUNOVSxNQUFNO1FBRVQsSUFBSU4sT0FBTztZQUNUQyxRQUFRRCxLQUFLLENBQUMsbUJBQW1CQTtZQUNqQyxNQUFNQTtRQUNSO1FBRUEsT0FBT0Q7SUFDVCxFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsTUFBTUE7SUFDUjtBQUNGO0FBRU8sZUFBZThCLFdBQVd6QixFQUFVO0lBQ3pDLElBQUk7UUFDRixNQUFNLEVBQUVMLEtBQUssRUFBRSxHQUFHLE1BQU1ULFNBQ3JCSSxJQUFJLENBQUMsU0FDTG9DLE1BQU0sR0FDTmpDLEVBQUUsQ0FBQyxNQUFNTztRQUVaLElBQUlMLE9BQU87WUFDVEMsUUFBUUQsS0FBSyxDQUFDLG1CQUFtQkE7WUFDakMsTUFBTUE7UUFDUjtJQUNGLEVBQUUsT0FBT0EsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxNQUFNQTtJQUNSO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2Vsa3dvaC9Eb2N1bWVudHMvR2l0SHViL215cXJjb2RlLWh1Yi9hcHAvc2VydmljZXMvdW5pdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IFVuaXQsIENyZWF0ZVVuaXRJbnB1dCwgVXBkYXRlVW5pdElucHV0IH0gZnJvbSAnLi4vdHlwZXMvdW5pdHMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVBbmRVcGxvYWRRUkNvZGUgfSBmcm9tICcuL3FyY29kZSc7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMITtcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZITtcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VW5pdHMoYnVpbGRpbmdJZD86IHN0cmluZyk6IFByb21pc2U8VW5pdFtdPiB7XG4gIHRyeSB7XG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1bml0cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5vcmRlcigndW5pdF9udW1iZXInKTtcbiAgICBcbiAgICBpZiAoYnVpbGRpbmdJZCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnYnVpbGRpbmdfaWQnLCBidWlsZGluZ0lkKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHVuaXRzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRhdGEgcmV0dXJuZWQgZnJvbSBTdXBhYmFzZScpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFVuaXRzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VW5pdChpZDogc3RyaW5nKTogUHJvbWlzZTxVbml0PiB7XG4gIHRyeSB7XG4gICAgLy8gQWRkIGV4cGxpY2l0IGhlYWRlcnMgZm9yIGJldHRlciBjcm9zcy1kZXZpY2UgY29tcGF0aWJpbGl0eVxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndW5pdHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdW5pdDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHVuaXQgZm91bmQgd2l0aCBJRDonLCBpZCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuaXQgbm90IGZvdW5kOiAke2lkfWApO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCB1bml0ICgke2lkfSk6YCwgZXJyb3IpO1xuICAgIC8vIFRyeSBhIHNlY29uZCBhcHByb2FjaCBpZiB0aGUgZmlyc3Qgb25lIGZhaWxzIChmb3IgbW9iaWxlIGNvbXBhdGliaWxpdHkpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIGFsdGVybmF0aXZlIGZldGNoIGFwcHJvYWNoIGZvciBtb2JpbGUgY29tcGF0aWJpbGl0eScpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtzdXBhYmFzZVVybH0vcmVzdC92MS91bml0cz9pZD1lcS4ke2lkfSZzZWxlY3Q9KmAsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdhcGlrZXknOiBzdXBhYmFzZUFub25LZXksXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c3VwYWJhc2VBbm9uS2V5fWAsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdW5pdHMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBpZiAodW5pdHMgJiYgdW5pdHMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdW5pdHNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuaXQgbm90IGZvdW5kOiAke2lkfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FsdGVybmF0aXZlIGZldGNoIGFsc28gZmFpbGVkOicsIGZhbGxiYWNrRXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7IC8vIFRocm93IHRoZSBvcmlnaW5hbCBlcnJvclxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVW5pdCh1bml0OiBDcmVhdGVVbml0SW5wdXQpOiBQcm9taXNlPFVuaXQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnW1VuaXQgRGVidWddIENyZWF0aW5nIG5ldyB1bml0OicsIHVuaXQpO1xuICAgIC8vIEZpcnN0IGNyZWF0ZSB0aGUgdW5pdCB3aXRob3V0IFFSIGNvZGVcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VuaXRzJylcbiAgICAgIC5pbnNlcnQoW3VuaXRdKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVbml0IERlYnVnXSBTdXBhYmFzZSBlcnJvciBjcmVhdGluZyB1bml0OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdbVW5pdCBEZWJ1Z10gVW5pdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseTonLCBkYXRhKTtcblxuICAgIC8vIE5vdyBnZW5lcmF0ZSBhbmQgYXNzaWduIFFSIGNvZGVcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tVbml0IERlYnVnXSBTdGFydGluZyBRUiBjb2RlIGdlbmVyYXRpb24gZm9yIHVuaXQ6JywgZGF0YS5pZCk7XG4gICAgICBjb25zdCBxckNvZGVVcmwgPSBhd2FpdCBnZW5lcmF0ZUFuZFVwbG9hZFFSQ29kZShcbiAgICAgICAgZGF0YS5pZCxcbiAgICAgICAgZGF0YS51bml0X251bWJlcixcbiAgICAgICAgZGF0YS5idWlsZGluZ19pZFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1tVbml0IERlYnVnXSBRUiBjb2RlIGdlbmVyYXRlZCwgVVJMOicsIHFyQ29kZVVybCk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdW5pdCB3aXRoIHRoZSBRUiBjb2RlIFVSTFxuICAgICAgY29uc29sZS5sb2coJ1tVbml0IERlYnVnXSBVcGRhdGluZyB1bml0IHdpdGggUVIgY29kZSBVUkwnKTtcbiAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZERhdGEsIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3VuaXRzJylcbiAgICAgICAgLnVwZGF0ZSh7IHFyX2NvZGVfdXJsOiBxckNvZGVVcmwgfSlcbiAgICAgICAgLmVxKCdpZCcsIGRhdGEuaWQpXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbVW5pdCBEZWJ1Z10gRXJyb3IgdXBkYXRpbmcgdW5pdCB3aXRoIFFSIGNvZGU6JywgdXBkYXRlRXJyb3IpO1xuICAgICAgICAvLyBTdGlsbCByZXR1cm4gdGhlIHVuaXQgZXZlbiBpZiBRUiBjb2RlIGFzc2lnbm1lbnQgZmFpbHNcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdbVW5pdCBEZWJ1Z10gVW5pdCB1cGRhdGVkIHdpdGggUVIgY29kZSBVUkwgc3VjY2Vzc2Z1bGx5OicsIHVwZGF0ZWREYXRhKTtcbiAgICAgIHJldHVybiB1cGRhdGVkRGF0YTtcbiAgICB9IGNhdGNoIChxckVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbVW5pdCBEZWJ1Z10gRXJyb3IgZ2VuZXJhdGluZyBRUiBjb2RlOicsIHFyRXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIHRoZSB1bml0IHdpdGhvdXQgUVIgY29kZSBpZiBnZW5lcmF0aW9uIGZhaWxzXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1VuaXQgRGVidWddIEVycm9yIGluIGNyZWF0ZVVuaXQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVbml0KHVuaXQ6IFVwZGF0ZVVuaXRJbnB1dCk6IFByb21pc2U8VW5pdD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndW5pdHMnKVxuICAgICAgLnVwZGF0ZSh1bml0KVxuICAgICAgLmVxKCdpZCcsIHVuaXQuaWQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdXBkYXRlVW5pdDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVVuaXQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndW5pdHMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoJ2lkJywgaWQpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZGVsZXRlVW5pdDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn0gIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImdlbmVyYXRlQW5kVXBsb2FkUVJDb2RlIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZSIsImdldFVuaXRzIiwiYnVpbGRpbmdJZCIsInF1ZXJ5IiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiZXEiLCJkYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIiwiZ2V0VW5pdCIsImlkIiwic2luZ2xlIiwiaGVhZGVycyIsImxvZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJvayIsInN0YXR1cyIsInVuaXRzIiwianNvbiIsImxlbmd0aCIsImZhbGxiYWNrRXJyb3IiLCJjcmVhdGVVbml0IiwidW5pdCIsImluc2VydCIsInFyQ29kZVVybCIsInVuaXRfbnVtYmVyIiwiYnVpbGRpbmdfaWQiLCJ1cGRhdGVkRGF0YSIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwicXJfY29kZV91cmwiLCJxckVycm9yIiwidXBkYXRlVW5pdCIsImRlbGV0ZVVuaXQiLCJkZWxldGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/services/units.ts\n"));

/***/ })

});