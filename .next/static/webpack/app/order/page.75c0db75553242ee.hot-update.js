"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/order/page",{

/***/ "(app-pages-browser)/./app/services/units.ts":
/*!*******************************!*\
  !*** ./app/services/units.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUnit: () => (/* binding */ createUnit),\n/* harmony export */   deleteUnit: () => (/* binding */ deleteUnit),\n/* harmony export */   getUnit: () => (/* binding */ getUnit),\n/* harmony export */   getUnits: () => (/* binding */ getUnits),\n/* harmony export */   updateUnit: () => (/* binding */ updateUnit)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(app-pages-browser)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var _qrcode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./qrcode */ \"(app-pages-browser)/./app/services/qrcode.ts\");\n\n\nconst supabaseUrl = \"https://pslapwodbwhedywmlfmk.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBzbGFwd29kYndoZWR5d21sZm1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1NTQ4NzgsImV4cCI6MjA1NjEzMDg3OH0.YXR7RN1ELBO8ywDv_tXpioTFJrpNXr9UtDLhxzgcHmU\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseAnonKey);\nasync function getUnits(buildingId) {\n    try {\n        console.log(\"Fetching units\".concat(buildingId ? \" for building: \".concat(buildingId) : ''));\n        // Build the URL with query parameters\n        let url = \"\".concat(supabaseUrl, \"/rest/v1/units?select=*&order=unit_number\");\n        if (buildingId) {\n            url += \"&building_id=eq.\".concat(encodeURIComponent(buildingId));\n        }\n        // Use direct fetch with proper headers to avoid 406 errors\n        const response = await fetch(url, {\n            method: 'GET',\n            headers: {\n                'apikey': supabaseAnonKey,\n                'Authorization': \"Bearer \".concat(supabaseAnonKey),\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Prefer': 'return=representation'\n            }\n        });\n        // Log the response status for debugging\n        console.log(\"Units fetch response status: \".concat(response.status, \" \").concat(response.statusText));\n        if (!response.ok) {\n            console.error(\"Error fetching units: \".concat(response.status, \" \").concat(response.statusText));\n            // If we get a 406 error, try an alternative approach\n            if (response.status === 406) {\n                console.log('Attempting alternative fetch method for units due to 406 error');\n                return await fetchUnitsAlternative(buildingId);\n            }\n            throw new Error(\"Failed to fetch units: \".concat(response.statusText));\n        }\n        const data = await response.json();\n        console.log(\"Successfully fetched \".concat(data.length, \" units\"));\n        return data;\n    } catch (error) {\n        console.error('Error in getUnits:', error);\n        throw error;\n    }\n}\n// Alternative fetch method if the main one fails with 406\nasync function fetchUnitsAlternative(buildingId) {\n    try {\n        console.log(\"Using alternative fetch method for units\".concat(buildingId ? \" for building: \".concat(buildingId) : ''));\n        // Build the URL with query parameters\n        let url = \"\".concat(supabaseUrl, \"/rest/v1/units?select=*&order=unit_number\");\n        if (buildingId) {\n            url += \"&building_id=eq.\".concat(encodeURIComponent(buildingId));\n        }\n        // Try a simpler fetch with minimal headers\n        const response = await fetch(url, {\n            method: 'GET',\n            headers: {\n                'apikey': supabaseAnonKey,\n                'Authorization': \"Bearer \".concat(supabaseAnonKey)\n            }\n        });\n        if (!response.ok) {\n            throw new Error(\"Alternative fetch failed: \".concat(response.status, \" \").concat(response.statusText));\n        }\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        console.error('Error in fetchUnitsAlternative:', error);\n        throw error;\n    }\n}\nasync function getUnit(id) {\n    try {\n        console.log(\"Fetching unit with ID: \".concat(id));\n        // Use direct fetch API with proper headers and limit parameter\n        const response = await fetch(\"\".concat(supabaseUrl, \"/rest/v1/units?id=eq.\").concat(encodeURIComponent(id), \"&limit=1\"), {\n            method: 'GET',\n            headers: {\n                'apikey': supabaseAnonKey,\n                'Authorization': \"Bearer \".concat(supabaseAnonKey),\n                // Explicitly set Accept header to avoid 406 errors\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Prefer': 'return=representation'\n            }\n        });\n        // Log the full response for debugging\n        console.log(\"Unit fetch response status: \".concat(response.status, \" \").concat(response.statusText));\n        if (!response.ok) {\n            console.error(\"Error fetching unit: \".concat(response.status, \" \").concat(response.statusText));\n            // If we get a 406 error, try an alternative approach\n            if (response.status === 406) {\n                console.log('Attempting alternative fetch method for unit due to 406 error');\n                return await fetchUnitAlternative(id);\n            }\n            throw new Error(\"Failed to fetch unit: \".concat(response.status, \" \").concat(response.statusText));\n        }\n        const units = await response.json();\n        console.log(\"Received data for unit query:\", units);\n        if (!units || units.length === 0) {\n            console.error(\"Unit not found with ID: \".concat(id));\n            throw new Error(\"Unit not found with ID: \".concat(id));\n        }\n        return units[0];\n    } catch (error) {\n        console.error(\"Failed to fetch unit (\".concat(id, \"):\"), error);\n        throw error;\n    }\n}\n// Alternative fetch method if the main one fails with 406\nasync function fetchUnitAlternative(id) {\n    try {\n        console.log(\"Using alternative fetch method for unit with ID: \".concat(id));\n        // Try a simpler fetch with minimal headers\n        const response = await fetch(\"\".concat(supabaseUrl, \"/rest/v1/units?id=eq.\").concat(encodeURIComponent(id), \"&limit=1\"), {\n            method: 'GET',\n            headers: {\n                'apikey': supabaseAnonKey,\n                'Authorization': \"Bearer \".concat(supabaseAnonKey)\n            }\n        });\n        if (!response.ok) {\n            throw new Error(\"Alternative fetch failed: \".concat(response.status, \" \").concat(response.statusText));\n        }\n        const units = await response.json();\n        if (!units || units.length === 0) {\n            throw new Error(\"Unit not found with ID: \".concat(id, \" (alternative method)\"));\n        }\n        return units[0];\n    } catch (error) {\n        console.error(\"Failed with alternative fetch for unit (\".concat(id, \"):\"), error);\n        throw error;\n    }\n}\nasync function createUnit(unit) {\n    try {\n        console.log('[Unit Debug] Creating new unit:', unit);\n        // First create the unit without QR code\n        const { data, error } = await supabase.from('units').insert([\n            unit\n        ]).select().single();\n        if (error) {\n            console.error('[Unit Debug] Supabase error creating unit:', error);\n            throw error;\n        }\n        console.log('[Unit Debug] Unit created successfully:', data);\n        // Now generate and assign QR code\n        try {\n            console.log('[Unit Debug] Starting QR code generation for unit:', data.id);\n            const qrCodeUrl = await (0,_qrcode__WEBPACK_IMPORTED_MODULE_0__.generateAndUploadQRCode)(data.id, data.unit_number, data.building_id);\n            console.log('[Unit Debug] QR code generated, URL:', qrCodeUrl);\n            // Update the unit with the QR code URL\n            console.log('[Unit Debug] Updating unit with QR code URL');\n            const { data: updatedData, error: updateError } = await supabase.from('units').update({\n                qr_code_url: qrCodeUrl\n            }).eq('id', data.id).select().single();\n            if (updateError) {\n                console.error('[Unit Debug] Error updating unit with QR code:', updateError);\n                // Still return the unit even if QR code assignment fails\n                return data;\n            }\n            console.log('[Unit Debug] Unit updated with QR code URL successfully:', updatedData);\n            return updatedData;\n        } catch (qrError) {\n            console.error('[Unit Debug] Error generating QR code:', qrError);\n            // Return the unit without QR code if generation fails\n            return data;\n        }\n    } catch (error) {\n        console.error('[Unit Debug] Error in createUnit:', error);\n        throw error;\n    }\n}\nasync function updateUnit(unit) {\n    try {\n        const { data, error } = await supabase.from('units').update(unit).eq('id', unit.id).select().single();\n        if (error) {\n            console.error('Supabase error:', error);\n            throw error;\n        }\n        return data;\n    } catch (error) {\n        console.error('Error in updateUnit:', error);\n        throw error;\n    }\n}\nasync function deleteUnit(id) {\n    try {\n        const { error } = await supabase.from('units').delete().eq('id', id);\n        if (error) {\n            console.error('Supabase error:', error);\n            throw error;\n        }\n    } catch (error) {\n        console.error('Error in deleteUnit:', error);\n        throw error;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9zZXJ2aWNlcy91bml0cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBRUY7QUFFbkQsTUFBTUUsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLFdBQVdSLG1FQUFZQSxDQUFDRSxhQUFhSTtBQUVwQyxlQUFlRyxTQUFTQyxVQUFtQjtJQUNoRCxJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQyxpQkFBa0UsT0FBakRGLGFBQWEsa0JBQTZCLE9BQVhBLGNBQWU7UUFFM0Usc0NBQXNDO1FBQ3RDLElBQUlHLE1BQU0sR0FBZSxPQUFaWCxhQUFZO1FBQ3pCLElBQUlRLFlBQVk7WUFDZEcsT0FBTyxtQkFBa0QsT0FBL0JDLG1CQUFtQko7UUFDL0M7UUFFQSwyREFBMkQ7UUFDM0QsTUFBTUssV0FBVyxNQUFNQyxNQUFNSCxLQUFLO1lBQ2hDSSxRQUFRO1lBQ1JDLFNBQVM7Z0JBQ1AsVUFBVVo7Z0JBQ1YsaUJBQWlCLFVBQTBCLE9BQWhCQTtnQkFDM0IsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFVBQVU7WUFDWjtRQUNGO1FBRUEsd0NBQXdDO1FBQ3hDSyxRQUFRQyxHQUFHLENBQUMsZ0NBQW1ERyxPQUFuQkEsU0FBU0ksTUFBTSxFQUFDLEtBQXVCLE9BQXBCSixTQUFTSyxVQUFVO1FBRWxGLElBQUksQ0FBQ0wsU0FBU00sRUFBRSxFQUFFO1lBQ2hCVixRQUFRVyxLQUFLLENBQUMseUJBQTRDUCxPQUFuQkEsU0FBU0ksTUFBTSxFQUFDLEtBQXVCLE9BQXBCSixTQUFTSyxVQUFVO1lBRTdFLHFEQUFxRDtZQUNyRCxJQUFJTCxTQUFTSSxNQUFNLEtBQUssS0FBSztnQkFDM0JSLFFBQVFDLEdBQUcsQ0FBQztnQkFDWixPQUFPLE1BQU1XLHNCQUFzQmI7WUFDckM7WUFFQSxNQUFNLElBQUljLE1BQU0sMEJBQThDLE9BQXBCVCxTQUFTSyxVQUFVO1FBQy9EO1FBRUEsTUFB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QUFXbkIsRUFBVTtJQUN6QyxJQUFJO1FBQ0YsTUFBTSxFQUFFUCxLQUFLLEVBQUUsR0FBRyxNQUFNZCxTQUNyQjBCLElBQUksQ0FBQyxTQUNMZSxNQUFNLEdBQ05KLEVBQUUsQ0FBQyxNQUFNaEI7UUFFWixJQUFJUCxPQUFPO1lBQ1RYLFFBQVFXLEtBQUssQ0FBQyxtQkFBbUJBO1lBQ2pDLE1BQU1BO1FBQ1I7SUFDRixFQUFFLE9BQU9BLE9BQU87UUFDZFgsUUFBUVcsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvam9lbGt3b2gvRG9jdW1lbnRzL0dpdEh1Yi9teXFyY29kZS1odWIvYXBwL3NlcnZpY2VzL3VuaXRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyBVbml0LCBDcmVhdGVVbml0SW5wdXQsIFVwZGF0ZVVuaXRJbnB1dCB9IGZyb20gJy4uL3R5cGVzL3VuaXRzJztcbmltcG9ydCB7IGdlbmVyYXRlQW5kVXBsb2FkUVJDb2RlIH0gZnJvbSAnLi9xcmNvZGUnO1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCE7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSE7XG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVuaXRzKGJ1aWxkaW5nSWQ/OiBzdHJpbmcpOiBQcm9taXNlPFVuaXRbXT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGBGZXRjaGluZyB1bml0cyR7YnVpbGRpbmdJZCA/IGAgZm9yIGJ1aWxkaW5nOiAke2J1aWxkaW5nSWR9YCA6ICcnfWApO1xuICAgIFxuICAgIC8vIEJ1aWxkIHRoZSBVUkwgd2l0aCBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgbGV0IHVybCA9IGAke3N1cGFiYXNlVXJsfS9yZXN0L3YxL3VuaXRzP3NlbGVjdD0qJm9yZGVyPXVuaXRfbnVtYmVyYDtcbiAgICBpZiAoYnVpbGRpbmdJZCkge1xuICAgICAgdXJsICs9IGAmYnVpbGRpbmdfaWQ9ZXEuJHtlbmNvZGVVUklDb21wb25lbnQoYnVpbGRpbmdJZCl9YDtcbiAgICB9XG4gICAgXG4gICAgLy8gVXNlIGRpcmVjdCBmZXRjaCB3aXRoIHByb3BlciBoZWFkZXJzIHRvIGF2b2lkIDQwNiBlcnJvcnNcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FwaWtleSc6IHN1cGFiYXNlQW5vbktleSxcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c3VwYWJhc2VBbm9uS2V5fWAsXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdQcmVmZXInOiAncmV0dXJuPXJlcHJlc2VudGF0aW9uJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTG9nIHRoZSByZXNwb25zZSBzdGF0dXMgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnNvbGUubG9nKGBVbml0cyBmZXRjaCByZXNwb25zZSBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyB1bml0czogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIFxuICAgICAgLy8gSWYgd2UgZ2V0IGEgNDA2IGVycm9yLCB0cnkgYW4gYWx0ZXJuYXRpdmUgYXBwcm9hY2hcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNikge1xuICAgICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyBhbHRlcm5hdGl2ZSBmZXRjaCBtZXRob2QgZm9yIHVuaXRzIGR1ZSB0byA0MDYgZXJyb3InKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZldGNoVW5pdHNBbHRlcm5hdGl2ZShidWlsZGluZ0lkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggdW5pdHM6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgZmV0Y2hlZCAke2RhdGEubGVuZ3RofSB1bml0c2ApO1xuICAgIFxuICAgIHJldHVybiBkYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFVuaXRzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBBbHRlcm5hdGl2ZSBmZXRjaCBtZXRob2QgaWYgdGhlIG1haW4gb25lIGZhaWxzIHdpdGggNDA2XG5hc3luYyBmdW5jdGlvbiBmZXRjaFVuaXRzQWx0ZXJuYXRpdmUoYnVpbGRpbmdJZD86IHN0cmluZyk6IFByb21pc2U8VW5pdFtdPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYFVzaW5nIGFsdGVybmF0aXZlIGZldGNoIG1ldGhvZCBmb3IgdW5pdHMke2J1aWxkaW5nSWQgPyBgIGZvciBidWlsZGluZzogJHtidWlsZGluZ0lkfWAgOiAnJ31gKTtcbiAgICBcbiAgICAvLyBCdWlsZCB0aGUgVVJMIHdpdGggcXVlcnkgcGFyYW1ldGVyc1xuICAgIGxldCB1cmwgPSBgJHtzdXBhYmFzZVVybH0vcmVzdC92MS91bml0cz9zZWxlY3Q9KiZvcmRlcj11bml0X251bWJlcmA7XG4gICAgaWYgKGJ1aWxkaW5nSWQpIHtcbiAgICAgIHVybCArPSBgJmJ1aWxkaW5nX2lkPWVxLiR7ZW5jb2RlVVJJQ29tcG9uZW50KGJ1aWxkaW5nSWQpfWA7XG4gICAgfVxuICAgIFxuICAgIC8vIFRyeSBhIHNpbXBsZXIgZmV0Y2ggd2l0aCBtaW5pbWFsIGhlYWRlcnNcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FwaWtleSc6IHN1cGFiYXNlQW5vbktleSxcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c3VwYWJhc2VBbm9uS2V5fWBcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFsdGVybmF0aXZlIGZldGNoIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBmZXRjaFVuaXRzQWx0ZXJuYXRpdmU6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVbml0KGlkOiBzdHJpbmcpOiBQcm9taXNlPFVuaXQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgdW5pdCB3aXRoIElEOiAke2lkfWApO1xuICAgIFxuICAgIC8vIFVzZSBkaXJlY3QgZmV0Y2ggQVBJIHdpdGggcHJvcGVyIGhlYWRlcnMgYW5kIGxpbWl0IHBhcmFtZXRlclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7c3VwYWJhc2VVcmx9L3Jlc3QvdjEvdW5pdHM/aWQ9ZXEuJHtlbmNvZGVVUklDb21wb25lbnQoaWQpfSZsaW1pdD0xYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FwaWtleSc6IHN1cGFiYXNlQW5vbktleSxcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c3VwYWJhc2VBbm9uS2V5fWAsXG4gICAgICAgIC8vIEV4cGxpY2l0bHkgc2V0IEFjY2VwdCBoZWFkZXIgdG8gYXZvaWQgNDA2IGVycm9yc1xuICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnUHJlZmVyJzogJ3JldHVybj1yZXByZXNlbnRhdGlvbidcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBMb2cgdGhlIGZ1bGwgcmVzcG9uc2UgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnNvbGUubG9nKGBVbml0IGZldGNoIHJlc3BvbnNlIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyB1bml0OiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSBnZXQgYSA0MDYgZXJyb3IsIHRyeSBhbiBhbHRlcm5hdGl2ZSBhcHByb2FjaFxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA2KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIGFsdGVybmF0aXZlIGZldGNoIG1ldGhvZCBmb3IgdW5pdCBkdWUgdG8gNDA2IGVycm9yJyk7XG4gICAgICAgIHJldHVybiBhd2FpdCBmZXRjaFVuaXRBbHRlcm5hdGl2ZShpZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHVuaXQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHVuaXRzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKGBSZWNlaXZlZCBkYXRhIGZvciB1bml0IHF1ZXJ5OmAsIHVuaXRzKTtcbiAgICBcbiAgICBpZiAoIXVuaXRzIHx8IHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5pdCBub3QgZm91bmQgd2l0aCBJRDogJHtpZH1gKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5pdCBub3QgZm91bmQgd2l0aCBJRDogJHtpZH1gKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHVuaXRzWzBdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCB1bml0ICgke2lkfSk6YCwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEFsdGVybmF0aXZlIGZldGNoIG1ldGhvZCBpZiB0aGUgbWFpbiBvbmUgZmFpbHMgd2l0aCA0MDZcbmFzeW5jIGZ1bmN0aW9uIGZldGNoVW5pdEFsdGVybmF0aXZlKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVuaXQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgVXNpbmcgYWx0ZXJuYXRpdmUgZmV0Y2ggbWV0aG9kIGZvciB1bml0IHdpdGggSUQ6ICR7aWR9YCk7XG4gICAgXG4gICAgLy8gVHJ5IGEgc2ltcGxlciBmZXRjaCB3aXRoIG1pbmltYWwgaGVhZGVyc1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7c3VwYWJhc2VVcmx9L3Jlc3QvdjEvdW5pdHM/aWQ9ZXEuJHtlbmNvZGVVUklDb21wb25lbnQoaWQpfSZsaW1pdD0xYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FwaWtleSc6IHN1cGFiYXNlQW5vbktleSxcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c3VwYWJhc2VBbm9uS2V5fWBcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFsdGVybmF0aXZlIGZldGNoIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdW5pdHMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgaWYgKCF1bml0cyB8fCB1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5pdCBub3QgZm91bmQgd2l0aCBJRDogJHtpZH0gKGFsdGVybmF0aXZlIG1ldGhvZClgKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHVuaXRzWzBdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB3aXRoIGFsdGVybmF0aXZlIGZldGNoIGZvciB1bml0ICgke2lkfSk6YCwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVbml0KHVuaXQ6IENyZWF0ZVVuaXRJbnB1dCk6IFByb21pc2U8VW5pdD4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdbVW5pdCBEZWJ1Z10gQ3JlYXRpbmcgbmV3IHVuaXQ6JywgdW5pdCk7XG4gICAgLy8gRmlyc3QgY3JlYXRlIHRoZSB1bml0IHdpdGhvdXQgUVIgY29kZVxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndW5pdHMnKVxuICAgICAgLmluc2VydChbdW5pdF0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW1VuaXQgRGVidWddIFN1cGFiYXNlIGVycm9yIGNyZWF0aW5nIHVuaXQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1tVbml0IERlYnVnXSBVbml0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIGRhdGEpO1xuXG4gICAgLy8gTm93IGdlbmVyYXRlIGFuZCBhc3NpZ24gUVIgY29kZVxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnW1VuaXQgRGVidWddIFN0YXJ0aW5nIFFSIGNvZGUgZ2VuZXJhdGlvbiBmb3IgdW5pdDonLCBkYXRhLmlkKTtcbiAgICAgIGNvbnN0IHFyQ29kZVVybCA9IGF3YWl0IGdlbmVyYXRlQW5kVXBsb2FkUVJDb2RlKFxuICAgICAgICBkYXRhLmlkLFxuICAgICAgICBkYXRhLnVuaXRfbnVtYmVyLFxuICAgICAgICBkYXRhLmJ1aWxkaW5nX2lkXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnW1VuaXQgRGVidWddIFFSIGNvZGUgZ2VuZXJhdGVkLCBVUkw6JywgcXJDb2RlVXJsKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSB1bml0IHdpdGggdGhlIFFSIGNvZGUgVVJMXG4gICAgICBjb25zb2xlLmxvZygnW1VuaXQgRGVidWddIFVwZGF0aW5nIHVuaXQgd2l0aCBRUiBjb2RlIFVSTCcpO1xuICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkRGF0YSwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgndW5pdHMnKVxuICAgICAgICAudXBkYXRlKHsgcXJfY29kZV91cmw6IHFyQ29kZVVybCB9KVxuICAgICAgICAuZXEoJ2lkJywgZGF0YS5pZClcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcbiAgICAgIFxuICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVbml0IERlYnVnXSBFcnJvciB1cGRhdGluZyB1bml0IHdpdGggUVIgY29kZTonLCB1cGRhdGVFcnJvcik7XG4gICAgICAgIC8vIFN0aWxsIHJldHVybiB0aGUgdW5pdCBldmVuIGlmIFFSIGNvZGUgYXNzaWdubWVudCBmYWlsc1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1tVbml0IERlYnVnXSBVbml0IHVwZGF0ZWQgd2l0aCBRUiBjb2RlIFVSTCBzdWNjZXNzZnVsbHk6JywgdXBkYXRlZERhdGEpO1xuICAgICAgcmV0dXJuIHVwZGF0ZWREYXRhO1xuICAgIH0gY2F0Y2ggKHFyRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVbml0IERlYnVnXSBFcnJvciBnZW5lcmF0aW5nIFFSIGNvZGU6JywgcXJFcnJvcik7XG4gICAgICAvLyBSZXR1cm4gdGhlIHVuaXQgd2l0aG91dCBRUiBjb2RlIGlmIGdlbmVyYXRpb24gZmFpbHNcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbVW5pdCBEZWJ1Z10gRXJyb3IgaW4gY3JlYXRlVW5pdDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVuaXQodW5pdDogVXBkYXRlVW5pdElucHV0KTogUHJvbWlzZTxVbml0PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1bml0cycpXG4gICAgICAudXBkYXRlKHVuaXQpXG4gICAgICAuZXEoJ2lkJywgdW5pdC5pZClcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiB1cGRhdGVVbml0OicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVW5pdChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1bml0cycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5lcSgnaWQnLCBpZCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBkZWxldGVVbml0OicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufSAiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiZ2VuZXJhdGVBbmRVcGxvYWRRUkNvZGUiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiZ2V0VW5pdHMiLCJidWlsZGluZ0lkIiwiY29uc29sZSIsImxvZyIsInVybCIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm9rIiwiZXJyb3IiLCJmZXRjaFVuaXRzQWx0ZXJuYXRpdmUiLCJFcnJvciIsImRhdGEiLCJqc29uIiwibGVuZ3RoIiwiZ2V0VW5pdCIsImlkIiwiZmV0Y2hVbml0QWx0ZXJuYXRpdmUiLCJ1bml0cyIsImNyZWF0ZVVuaXQiLCJ1bml0IiwiZnJvbSIsImluc2VydCIsInNlbGVjdCIsInNpbmdsZSIsInFyQ29kZVVybCIsInVuaXRfbnVtYmVyIiwiYnVpbGRpbmdfaWQiLCJ1cGRhdGVkRGF0YSIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwicXJfY29kZV91cmwiLCJlcSIsInFyRXJyb3IiLCJ1cGRhdGVVbml0IiwiZGVsZXRlVW5pdCIsImRlbGV0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/services/units.ts\n"));

/***/ })

});